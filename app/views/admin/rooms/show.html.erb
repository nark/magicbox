<h1>
  <%= @room.name %>
  <div class="pull-right">
    <%= link_to new_admin_room_subject_path(@room), class: "btn btn-info" do %>
      <%= fa_icon "plus" %>
      Subject
    <% end %>
    <%= link_to new_admin_room_device_path(@room), class: "btn btn-info" do %>
      <%= fa_icon "plus" %>
      Device
    <% end %>
    <%= link_to 'Edit', edit_admin_room_path(@room), class: "btn btn-success" %>
  </div>
</h1>

<hr> 

<div class="row">
  <div class="col-4">
    <h4>Info</h4>
    <ul class="list-group mb-3">
      <li class="list-group-item">
        <span><b>Name</b></span>
        <span class="pull-right"><%= @room.name %></span>
      </li>
      <li class="list-group-item">
        <span><b>Type</b></span>
        <span class="pull-right"><%= @room.room_type.titleize %></span>
      </li>
      <li class="list-group-item">
        <span><b>Scenario</b></span>
        <span class="pull-right"><%= @room.scenario.name %></span>
      </li>
    </ul>

    <ul class="list-group">
      <li class="list-group-item">
        <span><b>Length</b></span>
        <span class="pull-right"><%= @room.length %></span>
      </li>
      <li class="list-group-item">
        <span><b>Width</b></span>
        <span class="pull-right"><%= @room.width %></span>
      </li>
      <li class="list-group-item">
        <span><b>Height</b></span>
        <span class="pull-right"><%= @room.height %></span>
      </li>
    </ul>
  </div>
  <div class="col-8">
    <h4>Subjects</h4>
    <div class="row">
      <% @room.subjects.each do |subject| %>
      <div class="col-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title"><%= link_to subject.name, [:admin, subject.room, subject] %>
              <div class="pull-right">
                <small><small class="text-muted">Subject</small></small>
              </div>
            </h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <%= link_to 'Edit', edit_admin_room_subject_path(subject.room, subject), class: "btn btn-outline-success pull-right" %>
          </div>
        </div>
      </div>
    <% end %>
    </div>
  </div>
</div>

<br>

<h4>Devices</h4>

<div class="row">
  <% @room.devices.each do |device| %>
    <div class="col-3">
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title"><%= link_to device.name, [:admin, device.room, device] %>
            <div class="pull-right">
              <% if !device.foo? %>
                <span class="badge badge-pill badge-<%= device.state_color %>"><%= device.device_state.titleize %></span>
              <% end %>
            </div>
          </h5>
          <p class="card-text">
            <h3 class="font-weight-light text-info" >
              <% if device.foo? %>
                <% sample = device.data_types.first.samples.last %>
                <% if sample %>
                  <%= sample.value %> <%= sample.unit == "percent" ? "%" : "Â°C"  %>
                <% end %>
              <% end %>
            </h3>
          </p>
          <div class="pull-right">
            <% if !device.foo? %>
              <%= link_to "Stop", stop_admin_room_device_path(device.room, device), method: :post, class: "btn btn-outline-danger" %>
              <%= link_to "Start", start_admin_room_device_path(device.room, device), method: :post, class: "btn btn-outline-info" %>
            <% end %>
            <%= link_to "Edit", edit_admin_room_device_path(device.room, device), class: "btn btn-outline-success" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>